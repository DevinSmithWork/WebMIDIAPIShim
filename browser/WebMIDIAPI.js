(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],2:[function(require,module,exports){
'use strict';var _midi_access=require('./midi/midi_access');var _util=require('./util/util');/* eslint wrap-iife: ["error", "any"] */var midiAccess=void 0;(function(){//    if (!navigator.requestMIDIAccess) {
(0,_util.polyfill)();navigator.requestMIDIAccess=function(){// singleton-ish, no need to create multiple instances of MIDIAccess
if(midiAccess===undefined){midiAccess=(0,_midi_access.createMIDIAccess)();}return midiAccess;};if((0,_util.getDevice)().nodejs===true){navigator.close=function(){// Need to close MIDI input ports, otherwise Node.js will wait for MIDI input forever.
(0,_midi_access.closeAllMIDIInputs)();};}//    }
})();

},{"./midi/midi_access":3,"./util/util":10}],3:[function(require,module,exports){
'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();/*
  Creates a MIDIAccess instance:
  - Creates MIDIInput and MIDIOutput instances for the initially connected MIDI devices.
  - Keeps track of newly connected devices and creates the necessary instances of MIDIInput and MIDIOutput.
  - Keeps track of disconnected devices and removes them from the inputs and/or outputs map.
  - Creates a unique id for every device and stores these ids by the name of the device:
    so when a device gets disconnected and reconnected again, it will still have the same id. This
    is in line with the behavior of the native MIDIAccess object.

*/exports.createMIDIAccess=createMIDIAccess;exports.dispatchEvent=dispatchEvent;exports.closeAllMIDIInputs=closeAllMIDIInputs;exports.getMIDIDeviceId=getMIDIDeviceId;var _midi_input=require('./midi_input');var _midi_input2=_interopRequireDefault(_midi_input);var _midi_output=require('./midi_output');var _midi_output2=_interopRequireDefault(_midi_output);var _midiconnection_event=require('./midiconnection_event');var _midiconnection_event2=_interopRequireDefault(_midiconnection_event);var _jazz_instance=require('../util/jazz_instance');var _util=require('../util/util');var _store=require('../util/store');var _store2=_interopRequireDefault(_store);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var midiAccess=void 0;var jazzInstance=void 0;var midiInputs=new _store2.default();var midiOutputs=new _store2.default();var midiInputIds=new _store2.default();var midiOutputIds=new _store2.default();var listeners=new _store2.default();var MIDIAccess=function(){function MIDIAccess(midiInputs,midiOutputs){_classCallCheck(this,MIDIAccess);this.sysexEnabled=true;this.inputs=midiInputs;this.outputs=midiOutputs;}_createClass(MIDIAccess,[{key:'addEventListener',value:function addEventListener(type,listener,useCapture){if(type!=='statechange'){return;}if(listeners.has(listener)===false){listeners.add(listener);}}},{key:'removeEventListener',value:function removeEventListener(type,listener,useCapture){if(type!=='statechange'){return;}if(listeners.has(listener)===true){listeners.delete(listener);}}}]);return MIDIAccess;}();function createMIDIAccess(){return new Promise(function(resolve,reject){if(midiAccess!==undefined){resolve(midiAccess);return;}if((0,_util.getDevice)().browser==='ie9'){reject({message:'WebMIDIAPIShim supports Internet Explorer 10 and above.'});return;}(0,_jazz_instance.createJazzInstance)(function(instance){if(instance===undefined){reject({message:'No access to MIDI devices: browser does not support the WebMIDI API and the Jazz plugin is not installed.'});return;}jazzInstance=instance;createMIDIPorts(function(){setupListeners();midiAccess=new MIDIAccess(midiInputs,midiOutputs);resolve(midiAccess);});});});}// create MIDIInput and MIDIOutput instances for all initially connected MIDI devices
function createMIDIPorts(callback){var inputs=jazzInstance.MidiInList();var outputs=jazzInstance.MidiOutList();var numInputs=inputs.length;var numOutputs=outputs.length;loopCreateMIDIPort(0,numInputs,'input',inputs,function(){loopCreateMIDIPort(0,numOutputs,'output',outputs,callback);});}function loopCreateMIDIPort(index,max,type,list,callback){if(index<max){var name=list[index++];createMIDIPort(type,name,function(){loopCreateMIDIPort(index,max,type,list,callback);});}else{callback();}}function createMIDIPort(type,name,callback){(0,_jazz_instance.getJazzInstance)(type,function(instance){var port=void 0;var info=[name,'',''];if(type==='input'){if(instance.Support('MidiInInfo')){info=instance.MidiInInfo(name);}port=new _midi_input2.default(info,instance);midiInputs.set(port.id,port);}else if(type==='output'){if(instance.Support('MidiOutInfo')){info=instance.MidiOutInfo(name);}port=new _midi_output2.default(info,instance);midiOutputs.set(port.id,port);}callback(port);});}// lookup function: Jazz gives us the name of the connected/disconnected MIDI devices but we have stored them by id
function getPortByName(ports,name){var port=void 0;var values=ports.values();for(var i=0;i<values.length;i+=1){port=values[i];if(port.name===name){break;}}return port;}// keep track of connected/disconnected MIDI devices
function setupListeners(){jazzInstance.OnDisconnectMidiIn(function(name){var port=getPortByName(midiInputs,name);if(port!==undefined){port.state='disconnected';port.close();port._jazzInstance.inputInUse=false;midiInputs.delete(port.id);dispatchEvent(port);}});jazzInstance.OnDisconnectMidiOut(function(name){var port=getPortByName(midiOutputs,name);if(port!==undefined){port.state='disconnected';port.close();port._jazzInstance.outputInUse=false;midiOutputs.delete(port.id);dispatchEvent(port);}});jazzInstance.OnConnectMidiIn(function(name){createMIDIPort('input',name,function(port){dispatchEvent(port);});});jazzInstance.OnConnectMidiOut(function(name){createMIDIPort('output',name,function(port){dispatchEvent(port);});});}// when a device gets connected/disconnected both the port and MIDIAccess dispatch a MIDIConnectionEvent
// therefor we call the ports dispatchEvent function here as well
function dispatchEvent(port){port.dispatchEvent(new _midiconnection_event2.default(port,port));var evt=new _midiconnection_event2.default(midiAccess,port);if(typeof midiAccess.onstatechange==='function'){midiAccess.onstatechange(evt);}listeners.forEach(function(listener){return listener(evt);});}function closeAllMIDIInputs(){midiInputs.forEach(function(input){// input.close();
input._jazzInstance.MidiInClose();});}// check if we have already created a unique id for this device, if so: reuse it, if not: create a new id and store it
function getMIDIDeviceId(name,type){var id=void 0;if(type==='input'){id=midiInputIds.get(name);if(id===undefined){id=(0,_util.generateUUID)();midiInputIds.set(name,id);}}else if(type==='output'){id=midiOutputIds.get(name);if(id===undefined){id=(0,_util.generateUUID)();midiOutputIds.set(name,id);}}return id;}

},{"../util/jazz_instance":8,"../util/store":9,"../util/util":10,"./midi_input":4,"./midi_output":5,"./midiconnection_event":6}],4:[function(require,module,exports){
'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();/* eslint prefer-destructuring: 0 *//* eslint no-underscore-dangle: 0 *//* eslint no-bitwise: 0 *//* eslint func-names: 0 *//*
  MIDIInput is a wrapper around an input of a Jazz instance
*/var _midimessage_event=require('./midimessage_event');var _midimessage_event2=_interopRequireDefault(_midimessage_event);var _midiconnection_event=require('./midiconnection_event');var _midiconnection_event2=_interopRequireDefault(_midiconnection_event);var _midi_access=require('./midi_access');var _util=require('../util/util');var _store=require('../util/store');var _store2=_interopRequireDefault(_store);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var midiProc=void 0;var nodejs=(0,_util.getDevice)().nodejs;var MIDIInput=function(){function MIDIInput(info,instance){_classCallCheck(this,MIDIInput);this.id=(0,_midi_access.getMIDIDeviceId)(info[0],'input');this.name=info[0];this.manufacturer=info[1];this.version=info[2];this.type='input';this.state='connected';this.connection='pending';this.onstatechange=null;this._onmidimessage=null;// because we need to implicitly open the device when an onmidimessage handler gets added
// we define a setter that opens the device if the set value is a function
Object.defineProperty(this,'onmidimessage',{set:function set(value){this._onmidimessage=value;if(typeof value==='function'){this.open();}}});this._listeners=new _store2.default().set('midimessage',new _store2.default()).set('statechange',new _store2.default());this._inLongSysexMessage=false;this._sysexBuffer=new Uint8Array();this._jazzInstance=instance;this._jazzInstance.inputInUse=true;// on Linux opening and closing Jazz instances causes the plugin to crash a lot so we open
// the device here and don't close it when close() is called, see below
if((0,_util.getDevice)().platform==='linux'){this._jazzInstance.MidiInOpen(this.name,midiProc.bind(this));}}_createClass(MIDIInput,[{key:'addEventListener',value:function addEventListener(type,listener,useCapture){var listeners=this._listeners.get(type);if(listeners===undefined){return;}if(listeners.has(listener)===false){listeners.add(listener);}}},{key:'removeEventListener',value:function removeEventListener(type,listener,useCapture){var listeners=this._listeners.get(type);if(listeners===undefined){return;}if(listeners.has(listener)===false){listeners.delete(listener);}}},{key:'dispatchEvent',value:function dispatchEvent(evt){var listeners=this._listeners.get(evt.type);listeners.forEach(function(listener){listener(evt);});if(evt.type==='midimessage'){if(this._onmidimessage!==null){this._onmidimessage(evt);}}else if(evt.type==='statechange'){if(this.onstatechange!==null){this.onstatechange(evt);}}}},{key:'open',value:function open(){if(this.connection==='open'){return;}if((0,_util.getDevice)().platform!=='linux'){this._jazzInstance.MidiInOpen(this.name,midiProc.bind(this));}this.connection='open';(0,_midi_access.dispatchEvent)(this);// dispatch MIDIConnectionEvent via MIDIAccess
}},{key:'close',value:function close(){if(this.connection==='closed'){return;}if((0,_util.getDevice)().platform!=='linux'){this._jazzInstance.MidiInClose();}this.connection='closed';(0,_midi_access.dispatchEvent)(this);// dispatch MIDIConnectionEvent via MIDIAccess
this._onmidimessage=null;this.onstatechange=null;this._listeners.get('midimessage').clear();this._listeners.get('statechange').clear();}},{key:'_appendToSysexBuffer',value:function _appendToSysexBuffer(data){var oldLength=this._sysexBuffer.length;var tmpBuffer=new Uint8Array(oldLength+data.length);tmpBuffer.set(this._sysexBuffer);tmpBuffer.set(data,oldLength);this._sysexBuffer=tmpBuffer;}},{key:'_bufferLongSysex',value:function _bufferLongSysex(data,initialOffset){var j=initialOffset;while(j<data.length){if(data[j]==0xF7){// end of sysex!
j+=1;this._appendToSysexBuffer(data.slice(initialOffset,j));return j;}j+=1;}// didn't reach the end; just tack it on.
this._appendToSysexBuffer(data.slice(initialOffset,j));this._inLongSysexMessage=true;return j;}}]);return MIDIInput;}();exports.default=MIDIInput;midiProc=function midiProc(timestamp,data){var length=0;var i=void 0;var isSysexMessage=false;// Jazz sometimes passes us multiple messages at once, so we need to parse them out and pass them one at a time.
for(i=0;i<data.length;i+=length){var isValidMessage=true;if(this._inLongSysexMessage){i=this._bufferLongSysex(data,i);if(data[i-1]!=0xf7){// ran off the end without hitting the end of the sysex message
return;}isSysexMessage=true;}else{isSysexMessage=false;switch(data[i]&0xF0){case 0x00:// Chew up spurious 0x00 bytes.  Fixes a Windows problem.
length=1;isValidMessage=false;break;case 0x80:// note off
case 0x90:// note on
case 0xA0:// polyphonic aftertouch
case 0xB0:// control change
case 0xE0:// channel mode
length=3;break;case 0xC0:// program change
case 0xD0:// channel aftertouch
length=2;break;case 0xF0:switch(data[i]){case 0xf0:// letiable-length sysex.
i=this._bufferLongSysex(data,i);if(data[i-1]!=0xf7){// ran off the end without hitting the end of the sysex message
return;}isSysexMessage=true;break;case 0xF1:// MTC quarter frame
case 0xF3:// song select
length=2;break;case 0xF2:// song position pointer
length=3;break;default:length=1;break;}break;}}if(!isValidMessage){continue;}var evt={};evt.receivedTime=parseFloat(timestamp.toString())+this._jazzInstance._perfTimeZero;if(isSysexMessage||this._inLongSysexMessage){evt.data=new Uint8Array(this._sysexBuffer);this._sysexBuffer=new Uint8Array(0);this._inLongSysexMessage=false;}else{evt.data=new Uint8Array(data.slice(i,length+i));}if(nodejs){if(this._onmidimessage){this._onmidimessage(evt);}}else{var e=new _midimessage_event2.default(this,evt.data,evt.receivedTime);this.dispatchEvent(e);}}};

},{"../util/store":9,"../util/util":10,"./midi_access":3,"./midiconnection_event":6,"./midimessage_event":7}],5:[function(require,module,exports){
'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();/* eslint prefer-destructuring: 0 *//* eslint no-underscore-dangle: 0 *//*
  MIDIOutput is a wrapper around an output of a Jazz instance
*/var _util=require('../util/util');var _store=require('../util/store');var _store2=_interopRequireDefault(_store);var _midi_access=require('./midi_access');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var MIDIOutput=function(){function MIDIOutput(info,instance){_classCallCheck(this,MIDIOutput);this.id=(0,_midi_access.getMIDIDeviceId)(info[0],'output');this.name=info[0];this.manufacturer=info[1];this.version=info[2];this.type='output';this.state='connected';this.connection='pending';this.onmidimessage=null;this.onstatechange=null;this._listeners=new _store2.default();this._inLongSysexMessage=false;this._sysexBuffer=new Uint8Array();this._jazzInstance=instance;this._jazzInstance.outputInUse=true;if((0,_util.getDevice)().platform==='linux'){this._jazzInstance.MidiOutOpen(this.name);}}_createClass(MIDIOutput,[{key:'open',value:function open(){if(this.connection==='open'){return;}if((0,_util.getDevice)().platform!=='linux'){this._jazzInstance.MidiOutOpen(this.name);}this.connection='open';(0,_midi_access.dispatchEvent)(this);// dispatch MIDIConnectionEvent via MIDIAccess
}},{key:'close',value:function close(){if(this.connection==='closed'){return;}if((0,_util.getDevice)().platform!=='linux'){this._jazzInstance.MidiOutClose();}this.connection='closed';(0,_midi_access.dispatchEvent)(this);// dispatch MIDIConnectionEvent via MIDIAccess
this.onstatechange=null;this._listeners.clear();}},{key:'send',value:function send(data,timestamp){var _this=this;var delayBeforeSend=0;if(data.length===0){return false;}if(timestamp){delayBeforeSend=Math.floor(timestamp-performance.now());}if(timestamp&&delayBeforeSend>1){setTimeout(function(){_this._jazzInstance.MidiOutLong(data);},delayBeforeSend);}else{this._jazzInstance.MidiOutLong(data);}return true;}},{key:'clear',value:function clear(){// to be implemented
}},{key:'addEventListener',value:function addEventListener(type,listener,useCapture){if(type!=='statechange'){return;}if(this._listeners.has(listener)===false){this._listeners.add(listener);}}},{key:'removeEventListener',value:function removeEventListener(type,listener,useCapture){if(type!=='statechange'){return;}if(this._listeners.has(listener)===false){this._listeners.delete(listener);}}},{key:'dispatchEvent',value:function dispatchEvent(evt){this._listeners.forEach(function(listener){listener(evt);});if(this.onstatechange!==null){this.onstatechange(evt);}}}]);return MIDIOutput;}();exports.default=MIDIOutput;

},{"../util/store":9,"../util/util":10,"./midi_access":3}],6:[function(require,module,exports){
'use strict';Object.defineProperty(exports,"__esModule",{value:true});function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var MIDIConnectionEvent=function MIDIConnectionEvent(midiAccess,port){_classCallCheck(this,MIDIConnectionEvent);this.bubbles=false;this.cancelBubble=false;this.cancelable=false;this.currentTarget=midiAccess;this.defaultPrevented=false;this.eventPhase=0;this.path=[];this.port=port;this.returnValue=true;this.srcElement=midiAccess;this.target=midiAccess;this.timeStamp=Date.now();this.type='statechange';};exports.default=MIDIConnectionEvent;

},{}],7:[function(require,module,exports){
'use strict';Object.defineProperty(exports,"__esModule",{value:true});function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var MIDIMessageEvent=function MIDIMessageEvent(port,data,receivedTime){_classCallCheck(this,MIDIMessageEvent);this.bubbles=false;this.cancelBubble=false;this.cancelable=false;this.currentTarget=port;this.data=data;this.defaultPrevented=false;this.eventPhase=0;this.path=[];this.receivedTime=receivedTime;this.returnValue=true;this.srcElement=port;this.target=port;this.timeStamp=Date.now();this.type='midimessage';};exports.default=MIDIMessageEvent;

},{}],8:[function(require,module,exports){
'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.createJazzInstance=createJazzInstance;exports.getJazzInstance=getJazzInstance;var _store=require('./store');var _store2=_interopRequireDefault(_store);var _util=require('./util');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}/* eslint no-underscore-dangle: 0 *//*
  Creates instances of the Jazz plugin if necessary. Initially the MIDIAccess creates one main Jazz instance that is used
  to query all initially connected devices, and to track the devices that are being connected or disconnected at runtime.

  For every MIDIInput and MIDIOutput that is created, MIDIAccess queries the getJazzInstance() method for a Jazz instance
  that still have an available input or output. Because Jazz only allows one input and one output per instance, we
  need to create new instances if more than one MIDI input or output device gets connected.

  Note that an existing Jazz instance doesn't get deleted when both its input and output device are disconnected; instead it
  will be reused if a new device gets connected.
*/var jazzPluginInitTime=100;// milliseconds
var jazzInstanceNumber=0;var jazzInstances=new _store2.default();function createJazzInstance(callback){var id='jazz_'+jazzInstanceNumber+'_'+Date.now();jazzInstanceNumber+=1;var objRef=void 0;var activeX=void 0;if((0,_util.getDevice)().nodejs===true){// jazzMidi is available globally in the node environment
objRef=new jazzMidi.MIDI();}else{/*
            generate this html:

            <object id="Jazz1" classid="CLSID:1ACE1618-1C7D-4561-AEE1-34842AA85E90" class="hidden">
                <object id="Jazz2" type="audio/x-jazz" class="hidden">
                    <p style="visibility:visible;">This page requires <a href=http://jazz-soft.net>Jazz-Plugin</a> ...</p>
                </object>
            </object>
        */activeX=document.createElement('object');activeX.id=id+'ie';activeX.classid='CLSID:1ACE1618-1C7D-4561-AEE1-34842AA85E90';objRef=document.createElement('object');objRef.id=id;objRef.type='audio/x-jazz';activeX.appendChild(objRef);var p=document.createElement('p');p.appendChild(document.createTextNode('This page requires the '));var a=document.createElement('a');a.appendChild(document.createTextNode('Jazz plugin'));a.href='http://jazz-soft.net/';p.appendChild(a);p.appendChild(document.createTextNode('.'));objRef.appendChild(p);var insertionPoint=document.getElementById('MIDIPlugin');if(!insertionPoint){// Create hidden element
insertionPoint=document.createElement('div');insertionPoint.id='MIDIPlugin';insertionPoint.style.position='absolute';insertionPoint.style.visibility='hidden';insertionPoint.style.left='-9999px';insertionPoint.style.top='-9999px';document.body.appendChild(insertionPoint);}insertionPoint.appendChild(activeX);}setTimeout(function(){var instance=null;if(objRef.isJazz===true){instance=objRef;}else if(activeX.isJazz===true){instance=activeX;}if(instance!==null){instance._perfTimeZero=performance.now();jazzInstances.set(jazzInstanceNumber,instance);}callback(instance);},jazzPluginInitTime);}function getJazzInstance(type,callback){var key=type==='input'?'inputInUse':'outputInUse';var instance=null;var values=jazzInstances.values();for(var i=0;i<values.length;i+=1){var inst=values[i];if(inst[key]!==true){instance=inst;break;}}if(instance===null){createJazzInstance(callback);}else{callback(instance);}}

},{"./store":9,"./util":10}],9:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var idIndex=0;var Store=function(){function Store(){_classCallCheck(this,Store);this.store={};this.keys=[];}_createClass(Store,[{key:"add",value:function add(obj){var id=""+new Date().getTime()+idIndex;idIndex+=1;this.keys.push(id);this.store[id]=obj;}},{key:"set",value:function set(id,obj){this.keys.push(id);this.store[id]=obj;return this;}},{key:"get",value:function get(id){return this.store[id];}},{key:"has",value:function has(id){return this.keys.indexOf(id)!==-1;}},{key:"delete",value:function _delete(id){delete this.store[id];var index=this.keys.indexOf(id);if(index>-1){this.keys.splice(index,1);}return this;}},{key:"values",value:function values(){var elements=[];var l=this.keys.length;for(var i=0;i<l;i+=1){var element=this.store[this.keys[i]];elements.push(element);}return elements;}},{key:"forEach",value:function forEach(cb){var l=this.keys.length;for(var i=0;i<l;i+=1){var element=this.store[this.keys[i]];cb(element);}}},{key:"clear",value:function clear(){this.keys=[];this.store={};}}]);return Store;}();exports.default=Store;

},{}],10:[function(require,module,exports){
(function (process,global){
'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.getDevice=getDevice;exports.polyfillPerformance=polyfillPerformance;exports.generateUUID=generateUUID;exports.polyfillPromise=polyfillPromise;exports.polyfill=polyfill;/* eslint no-param-reassign: 0 *//* eslint no-bitwise: 0 *//* eslint no-mixed-operators: 0 *//*
  A collection of handy util methods
*/var device=null;// check on what type of device we are running, note that in this context
// a device is a computer not a MIDI device
function getDevice(){if(device!==null){return device;}var platform='undetected';var browser='undetected';if(typeof navigator.nodejs!=='undefined'){device={platform:process.platform,nodejs:true,mobile:platform==='ios'||platform==='android'};return device;}var ua=navigator.userAgent;if(ua.match(/(iPad|iPhone|iPod)/g)){platform='ios';}else if(ua.indexOf('Android')!==-1){platform='android';}else if(ua.indexOf('Linux')!==-1){platform='linux';}else if(ua.indexOf('Macintosh')!==-1){platform='osx';}else if(ua.indexOf('Windows')!==-1){platform='windows';}if(ua.indexOf('Chrome')!==-1){// chrome, chromium and canary
browser='chrome';if(ua.indexOf('OPR')!==-1){browser='opera';}else if(ua.indexOf('Chromium')!==-1){browser='chromium';}}else if(ua.indexOf('Safari')!==-1){browser='safari';}else if(ua.indexOf('Firefox')!==-1){browser='firefox';}else if(ua.indexOf('Trident')!==-1){browser='ie';if(ua.indexOf('MSIE 9')!==-1){browser='ie9';}}if(platform==='ios'){if(ua.indexOf('CriOS')!==-1){browser='chrome';}}device={platform:platform,browser:browser,mobile:platform==='ios'||platform==='android',nodejs:false};return device;}function polyfillPerformance(){// performance is a global variable
if(typeof performance==='undefined'){performance={};}Date.now=Date.now||function(){return new Date().getTime();};if(typeof performance.now==='undefined'){var nowOffset=Date.now();if(typeof performance.timing!=='undefined'&&typeof performance.timing.navigationStart!=='undefined'){nowOffset=performance.timing.navigationStart;}performance.now=function now(){return Date.now()-nowOffset;};}}function generateUUID(){var d=new Date().getTime();var uuid=new Array(64).join('x');// 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx';
uuid=uuid.replace(/[xy]/g,function(c){var r=(d+Math.random()*16)%16|0;d=Math.floor(d/16);return(c==='x'?r:r&0x3|0x8).toString(16).toUpperCase();});return uuid;}// a very simple implementation of a Promise for Internet Explorer and Nodejs
function polyfillPromise(scope){if(typeof scope.Promise!=='function'){scope.Promise=function promise(executor){this.executor=executor;};scope.Promise.prototype.then=function then(resolve,reject){if(typeof resolve!=='function'){resolve=function resolve(){};}if(typeof reject!=='function'){reject=function reject(){};}this.executor(resolve,reject);};}}function polyfill(){var d=getDevice();// console.log(device);
if(d.browser==='ie'){polyfillPromise(window);}else if(d.nodejs===true){polyfillPromise(global);}polyfillPerformance();}

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"_process":1}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwic3JjL2luZGV4LmpzIiwic3JjL21pZGkvbWlkaV9hY2Nlc3MuanMiLCJzcmMvbWlkaS9taWRpX2lucHV0LmpzIiwic3JjL21pZGkvbWlkaV9vdXRwdXQuanMiLCJzcmMvbWlkaS9taWRpY29ubmVjdGlvbl9ldmVudC5qcyIsInNyYy9taWRpL21pZGltZXNzYWdlX2V2ZW50LmpzIiwic3JjL3V0aWwvamF6el9pbnN0YW5jZS5qcyIsInNyYy91dGlsL3N0b3JlLmpzIiwic3JjL3V0aWwvdXRpbC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QWpCLENBQTJCLENBQ3ZDLEtBQUssUUFBTCxDQUFnQixRQUFoQixDQUNILENBRkQsQ0FJQSxNQUFNLE9BQU4sQ0FBYyxTQUFkLENBQXdCLElBQXhCLENBQStCLFFBQVMsS0FBVCxDQUFjLE9BQWQsQ0FBdUIsTUFBdkIsQ0FBK0IsQ0FDMUQsR0FBSSxNQUFPLFFBQVAsR0FBbUIsVUFBdkIsQ0FBbUMsQ0FDL0IsUUFBVSxrQkFBTSxDQUFHLENBQW5CLENBQ0gsQ0FDRCxHQUFJLE1BQU8sT0FBUCxHQUFrQixVQUF0QixDQUFrQyxDQUM5QixPQUFTLGlCQUFNLENBQUcsQ0FBbEIsQ0FDSCxDQUNELEtBQUssUUFBTCxDQUFjLE9BQWQsQ0FBdUIsTUFBdkIsRUFDSCxDQVJELENBU0gsQ0FDSixDQUdNLFFBQVMsU0FBVCxFQUFvQixDQUN2QixHQUFNLEdBQUksV0FBVixDQUNBO0FBQ0EsR0FBSSxFQUFFLE9BQUYsR0FBYyxJQUFsQixDQUF3QixDQUNwQixnQkFBZ0IsTUFBaEIsRUFDSCxDQUZELElBRU8sSUFBSSxFQUFFLE1BQUYsR0FBYSxJQUFqQixDQUF1QixDQUMxQixnQkFBZ0IsTUFBaEIsRUFDSCxDQUNELHNCQUNIIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCIvKiBlc2xpbnQgd3JhcC1paWZlOiBbXCJlcnJvclwiLCBcImFueVwiXSAqL1xuXG5pbXBvcnQgeyBjcmVhdGVNSURJQWNjZXNzLCBjbG9zZUFsbE1JRElJbnB1dHMgfSBmcm9tICcuL21pZGkvbWlkaV9hY2Nlc3MnO1xuaW1wb3J0IHsgcG9seWZpbGwsIGdldERldmljZSB9IGZyb20gJy4vdXRpbC91dGlsJztcblxubGV0IG1pZGlBY2Nlc3M7XG5cbigoKSA9PiB7XG4gICAgLy8gICAgaWYgKCFuYXZpZ2F0b3IucmVxdWVzdE1JRElBY2Nlc3MpIHtcbiAgICBwb2x5ZmlsbCgpO1xuICAgIG5hdmlnYXRvci5yZXF1ZXN0TUlESUFjY2VzcyA9ICgpID0+IHtcbiAgICAgICAgLy8gc2luZ2xldG9uLWlzaCwgbm8gbmVlZCB0byBjcmVhdGUgbXVsdGlwbGUgaW5zdGFuY2VzIG9mIE1JRElBY2Nlc3NcbiAgICAgICAgaWYgKG1pZGlBY2Nlc3MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbWlkaUFjY2VzcyA9IGNyZWF0ZU1JRElBY2Nlc3MoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWlkaUFjY2VzcztcbiAgICB9O1xuICAgIGlmIChnZXREZXZpY2UoKS5ub2RlanMgPT09IHRydWUpIHtcbiAgICAgICAgbmF2aWdhdG9yLmNsb3NlID0gKCkgPT4ge1xuICAgICAgICAgICAgLy8gTmVlZCB0byBjbG9zZSBNSURJIGlucHV0IHBvcnRzLCBvdGhlcndpc2UgTm9kZS5qcyB3aWxsIHdhaXQgZm9yIE1JREkgaW5wdXQgZm9yZXZlci5cbiAgICAgICAgICAgIGNsb3NlQWxsTUlESUlucHV0cygpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvLyAgICB9XG59KSgpO1xuIiwiLypcbiAgQ3JlYXRlcyBhIE1JRElBY2Nlc3MgaW5zdGFuY2U6XG4gIC0gQ3JlYXRlcyBNSURJSW5wdXQgYW5kIE1JRElPdXRwdXQgaW5zdGFuY2VzIGZvciB0aGUgaW5pdGlhbGx5IGNvbm5lY3RlZCBNSURJIGRldmljZXMuXG4gIC0gS2VlcHMgdHJhY2sgb2YgbmV3bHkgY29ubmVjdGVkIGRldmljZXMgYW5kIGNyZWF0ZXMgdGhlIG5lY2Vzc2FyeSBpbnN0YW5jZXMgb2YgTUlESUlucHV0IGFuZCBNSURJT3V0cHV0LlxuICAtIEtlZXBzIHRyYWNrIG9mIGRpc2Nvbm5lY3RlZCBkZXZpY2VzIGFuZCByZW1vdmVzIHRoZW0gZnJvbSB0aGUgaW5wdXRzIGFuZC9vciBvdXRwdXRzIG1hcC5cbiAgLSBDcmVhdGVzIGEgdW5pcXVlIGlkIGZvciBldmVyeSBkZXZpY2UgYW5kIHN0b3JlcyB0aGVzZSBpZHMgYnkgdGhlIG5hbWUgb2YgdGhlIGRldmljZTpcbiAgICBzbyB3aGVuIGEgZGV2aWNlIGdldHMgZGlzY29ubmVjdGVkIGFuZCByZWNvbm5lY3RlZCBhZ2FpbiwgaXQgd2lsbCBzdGlsbCBoYXZlIHRoZSBzYW1lIGlkLiBUaGlzXG4gICAgaXMgaW4gbGluZSB3aXRoIHRoZSBiZWhhdmlvciBvZiB0aGUgbmF0aXZlIE1JRElBY2Nlc3Mgb2JqZWN0LlxuXG4qL1xuXG5pbXBvcnQgTUlESUlucHV0IGZyb20gJy4vbWlkaV9pbnB1dCc7XG5pbXBvcnQgTUlESU91dHB1dCBmcm9tICcuL21pZGlfb3V0cHV0JztcbmltcG9ydCBNSURJQ29ubmVjdGlvbkV2ZW50IGZyb20gJy4vbWlkaWNvbm5lY3Rpb25fZXZlbnQnO1xuaW1wb3J0IHsgY3JlYXRlSmF6ekluc3RhbmNlLCBnZXRKYXp6SW5zdGFuY2UgfSBmcm9tICcuLi91dGlsL2phenpfaW5zdGFuY2UnO1xuaW1wb3J0IHsgZ2V0RGV2aWNlLCBnZW5lcmF0ZVVVSUQgfSBmcm9tICcuLi91dGlsL3V0aWwnO1xuaW1wb3J0IFN0b3JlIGZyb20gJy4uL3V0aWwvc3RvcmUnO1xuXG5sZXQgbWlkaUFjY2VzcztcbmxldCBqYXp6SW5zdGFuY2U7XG5jb25zdCBtaWRpSW5wdXRzID0gbmV3IFN0b3JlKCk7XG5jb25zdCBtaWRpT3V0cHV0cyA9IG5ldyBTdG9yZSgpO1xuY29uc3QgbWlkaUlucHV0SWRzID0gbmV3IFN0b3JlKCk7XG5jb25zdCBtaWRpT3V0cHV0SWRzID0gbmV3IFN0b3JlKCk7XG5jb25zdCBsaXN0ZW5lcnMgPSBuZXcgU3RvcmUoKTtcblxuY2xhc3MgTUlESUFjY2VzcyB7XG4gICAgY29uc3RydWN0b3IobWlkaUlucHV0cywgbWlkaU91dHB1dHMpIHtcbiAgICAgICAgdGhpcy5zeXNleEVuYWJsZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmlucHV0cyA9IG1pZGlJbnB1dHM7XG4gICAgICAgIHRoaXMub3V0cHV0cyA9IG1pZGlPdXRwdXRzO1xuICAgIH1cblxuICAgIGFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIsIHVzZUNhcHR1cmUpIHtcbiAgICAgICAgaWYgKHR5cGUgIT09ICdzdGF0ZWNoYW5nZScpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGlzdGVuZXJzLmhhcyhsaXN0ZW5lcikgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIsIHVzZUNhcHR1cmUpIHtcbiAgICAgICAgaWYgKHR5cGUgIT09ICdzdGF0ZWNoYW5nZScpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGlzdGVuZXJzLmhhcyhsaXN0ZW5lcikgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGxpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVNSURJQWNjZXNzKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBpZiAobWlkaUFjY2VzcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXNvbHZlKG1pZGlBY2Nlc3MpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGdldERldmljZSgpLmJyb3dzZXIgPT09ICdpZTknKSB7XG4gICAgICAgICAgICByZWplY3QoeyBtZXNzYWdlOiAnV2ViTUlESUFQSVNoaW0gc3VwcG9ydHMgSW50ZXJuZXQgRXhwbG9yZXIgMTAgYW5kIGFib3ZlLicgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjcmVhdGVKYXp6SW5zdGFuY2UoKGluc3RhbmNlKSA9PiB7XG4gICAgICAgICAgICBpZiAoaW5zdGFuY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJlamVjdCh7IG1lc3NhZ2U6ICdObyBhY2Nlc3MgdG8gTUlESSBkZXZpY2VzOiBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgdGhlIFdlYk1JREkgQVBJIGFuZCB0aGUgSmF6eiBwbHVnaW4gaXMgbm90IGluc3RhbGxlZC4nIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgamF6ekluc3RhbmNlID0gaW5zdGFuY2U7XG5cbiAgICAgICAgICAgIGNyZWF0ZU1JRElQb3J0cygoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2V0dXBMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgICAgICBtaWRpQWNjZXNzID0gbmV3IE1JRElBY2Nlc3MobWlkaUlucHV0cywgbWlkaU91dHB1dHMpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUobWlkaUFjY2Vzcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSkpO1xufVxuXG5cbi8vIGNyZWF0ZSBNSURJSW5wdXQgYW5kIE1JRElPdXRwdXQgaW5zdGFuY2VzIGZvciBhbGwgaW5pdGlhbGx5IGNvbm5lY3RlZCBNSURJIGRldmljZXNcbmZ1bmN0aW9uIGNyZWF0ZU1JRElQb3J0cyhjYWxsYmFjaykge1xuICAgIGNvbnN0IGlucHV0cyA9IGphenpJbnN0YW5jZS5NaWRpSW5MaXN0KCk7XG4gICAgY29uc3Qgb3V0cHV0cyA9IGphenpJbnN0YW5jZS5NaWRpT3V0TGlzdCgpO1xuICAgIGNvbnN0IG51bUlucHV0cyA9IGlucHV0cy5sZW5ndGg7XG4gICAgY29uc3QgbnVtT3V0cHV0cyA9IG91dHB1dHMubGVuZ3RoO1xuXG4gICAgbG9vcENyZWF0ZU1JRElQb3J0KDAsIG51bUlucHV0cywgJ2lucHV0JywgaW5wdXRzLCAoKSA9PiB7XG4gICAgICAgIGxvb3BDcmVhdGVNSURJUG9ydCgwLCBudW1PdXRwdXRzLCAnb3V0cHV0Jywgb3V0cHV0cywgY2FsbGJhY2spO1xuICAgIH0pO1xufVxuXG5cbmZ1bmN0aW9uIGxvb3BDcmVhdGVNSURJUG9ydChpbmRleCwgbWF4LCB0eXBlLCBsaXN0LCBjYWxsYmFjaykge1xuICAgIGlmIChpbmRleCA8IG1heCkge1xuICAgICAgICBjb25zdCBuYW1lID0gbGlzdFtpbmRleCsrXTtcbiAgICAgICAgY3JlYXRlTUlESVBvcnQodHlwZSwgbmFtZSwgKCkgPT4ge1xuICAgICAgICAgICAgbG9vcENyZWF0ZU1JRElQb3J0KGluZGV4LCBtYXgsIHR5cGUsIGxpc3QsIGNhbGxiYWNrKTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICB9XG59XG5cblxuZnVuY3Rpb24gY3JlYXRlTUlESVBvcnQodHlwZSwgbmFtZSwgY2FsbGJhY2spIHtcbiAgICBnZXRKYXp6SW5zdGFuY2UodHlwZSwgKGluc3RhbmNlKSA9PiB7XG4gICAgICAgIGxldCBwb3J0O1xuICAgICAgICBsZXQgaW5mbyA9IFtuYW1lLCAnJywgJyddO1xuICAgICAgICBpZiAodHlwZSA9PT0gJ2lucHV0Jykge1xuICAgICAgICAgICAgaWYgKGluc3RhbmNlLlN1cHBvcnQoJ01pZGlJbkluZm8nKSkge1xuICAgICAgICAgICAgICAgIGluZm8gPSBpbnN0YW5jZS5NaWRpSW5JbmZvKG5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcG9ydCA9IG5ldyBNSURJSW5wdXQoaW5mbywgaW5zdGFuY2UpO1xuICAgICAgICAgICAgbWlkaUlucHV0cy5zZXQocG9ydC5pZCwgcG9ydCk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ291dHB1dCcpIHtcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZS5TdXBwb3J0KCdNaWRpT3V0SW5mbycpKSB7XG4gICAgICAgICAgICAgICAgaW5mbyA9IGluc3RhbmNlLk1pZGlPdXRJbmZvKG5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcG9ydCA9IG5ldyBNSURJT3V0cHV0KGluZm8sIGluc3RhbmNlKTtcbiAgICAgICAgICAgIG1pZGlPdXRwdXRzLnNldChwb3J0LmlkLCBwb3J0KTtcbiAgICAgICAgfVxuICAgICAgICBjYWxsYmFjayhwb3J0KTtcbiAgICB9KTtcbn1cblxuXG4vLyBsb29rdXAgZnVuY3Rpb246IEphenogZ2l2ZXMgdXMgdGhlIG5hbWUgb2YgdGhlIGNvbm5lY3RlZC9kaXNjb25uZWN0ZWQgTUlESSBkZXZpY2VzIGJ1dCB3ZSBoYXZlIHN0b3JlZCB0aGVtIGJ5IGlkXG5mdW5jdGlvbiBnZXRQb3J0QnlOYW1lKHBvcnRzLCBuYW1lKSB7XG4gICAgbGV0IHBvcnQ7XG4gICAgY29uc3QgdmFsdWVzID0gcG9ydHMudmFsdWVzKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgcG9ydCA9IHZhbHVlc1tpXTtcbiAgICAgICAgaWYgKHBvcnQubmFtZSA9PT0gbmFtZSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBvcnQ7XG59XG5cblxuLy8ga2VlcCB0cmFjayBvZiBjb25uZWN0ZWQvZGlzY29ubmVjdGVkIE1JREkgZGV2aWNlc1xuZnVuY3Rpb24gc2V0dXBMaXN0ZW5lcnMoKSB7XG4gICAgamF6ekluc3RhbmNlLk9uRGlzY29ubmVjdE1pZGlJbigobmFtZSkgPT4ge1xuICAgICAgICBjb25zdCBwb3J0ID0gZ2V0UG9ydEJ5TmFtZShtaWRpSW5wdXRzLCBuYW1lKTtcbiAgICAgICAgaWYgKHBvcnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcG9ydC5zdGF0ZSA9ICdkaXNjb25uZWN0ZWQnO1xuICAgICAgICAgICAgcG9ydC5jbG9zZSgpO1xuICAgICAgICAgICAgcG9ydC5famF6ekluc3RhbmNlLmlucHV0SW5Vc2UgPSBmYWxzZTtcbiAgICAgICAgICAgIG1pZGlJbnB1dHMuZGVsZXRlKHBvcnQuaWQpO1xuICAgICAgICAgICAgZGlzcGF0Y2hFdmVudChwb3J0KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgamF6ekluc3RhbmNlLk9uRGlzY29ubmVjdE1pZGlPdXQoKG5hbWUpID0+IHtcbiAgICAgICAgY29uc3QgcG9ydCA9IGdldFBvcnRCeU5hbWUobWlkaU91dHB1dHMsIG5hbWUpO1xuICAgICAgICBpZiAocG9ydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBwb3J0LnN0YXRlID0gJ2Rpc2Nvbm5lY3RlZCc7XG4gICAgICAgICAgICBwb3J0LmNsb3NlKCk7XG4gICAgICAgICAgICBwb3J0Ll9qYXp6SW5zdGFuY2Uub3V0cHV0SW5Vc2UgPSBmYWxzZTtcbiAgICAgICAgICAgIG1pZGlPdXRwdXRzLmRlbGV0ZShwb3J0LmlkKTtcbiAgICAgICAgICAgIGRpc3BhdGNoRXZlbnQocG9ydCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGphenpJbnN0YW5jZS5PbkNvbm5lY3RNaWRpSW4oKG5hbWUpID0+IHtcbiAgICAgICAgY3JlYXRlTUlESVBvcnQoJ2lucHV0JywgbmFtZSwgKHBvcnQpID0+IHtcbiAgICAgICAgICAgIGRpc3BhdGNoRXZlbnQocG9ydCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgamF6ekluc3RhbmNlLk9uQ29ubmVjdE1pZGlPdXQoKG5hbWUpID0+IHtcbiAgICAgICAgY3JlYXRlTUlESVBvcnQoJ291dHB1dCcsIG5hbWUsIChwb3J0KSA9PiB7XG4gICAgICAgICAgICBkaXNwYXRjaEV2ZW50KHBvcnQpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuXG4vLyB3aGVuIGEgZGV2aWNlIGdldHMgY29ubmVjdGVkL2Rpc2Nvbm5lY3RlZCBib3RoIHRoZSBwb3J0IGFuZCBNSURJQWNjZXNzIGRpc3BhdGNoIGEgTUlESUNvbm5lY3Rpb25FdmVudFxuLy8gdGhlcmVmb3Igd2UgY2FsbCB0aGUgcG9ydHMgZGlzcGF0Y2hFdmVudCBmdW5jdGlvbiBoZXJlIGFzIHdlbGxcbmV4cG9ydCBmdW5jdGlvbiBkaXNwYXRjaEV2ZW50KHBvcnQpIHtcbiAgICBwb3J0LmRpc3BhdGNoRXZlbnQobmV3IE1JRElDb25uZWN0aW9uRXZlbnQocG9ydCwgcG9ydCkpO1xuXG4gICAgY29uc3QgZXZ0ID0gbmV3IE1JRElDb25uZWN0aW9uRXZlbnQobWlkaUFjY2VzcywgcG9ydCk7XG5cbiAgICBpZiAodHlwZW9mIG1pZGlBY2Nlc3Mub25zdGF0ZWNoYW5nZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBtaWRpQWNjZXNzLm9uc3RhdGVjaGFuZ2UoZXZ0KTtcbiAgICB9XG4gICAgbGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIoZXZ0KSk7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGNsb3NlQWxsTUlESUlucHV0cygpIHtcbiAgICBtaWRpSW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICAgIC8vIGlucHV0LmNsb3NlKCk7XG4gICAgICAgIGlucHV0Ll9qYXp6SW5zdGFuY2UuTWlkaUluQ2xvc2UoKTtcbiAgICB9KTtcbn1cblxuXG4vLyBjaGVjayBpZiB3ZSBoYXZlIGFscmVhZHkgY3JlYXRlZCBhIHVuaXF1ZSBpZCBmb3IgdGhpcyBkZXZpY2UsIGlmIHNvOiByZXVzZSBpdCwgaWYgbm90OiBjcmVhdGUgYSBuZXcgaWQgYW5kIHN0b3JlIGl0XG5leHBvcnQgZnVuY3Rpb24gZ2V0TUlESURldmljZUlkKG5hbWUsIHR5cGUpIHtcbiAgICBsZXQgaWQ7XG4gICAgaWYgKHR5cGUgPT09ICdpbnB1dCcpIHtcbiAgICAgICAgaWQgPSBtaWRpSW5wdXRJZHMuZ2V0KG5hbWUpO1xuICAgICAgICBpZiAoaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWQgPSBnZW5lcmF0ZVVVSUQoKTtcbiAgICAgICAgICAgIG1pZGlJbnB1dElkcy5zZXQobmFtZSwgaWQpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnb3V0cHV0Jykge1xuICAgICAgICBpZCA9IG1pZGlPdXRwdXRJZHMuZ2V0KG5hbWUpO1xuICAgICAgICBpZiAoaWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWQgPSBnZW5lcmF0ZVVVSUQoKTtcbiAgICAgICAgICAgIG1pZGlPdXRwdXRJZHMuc2V0KG5hbWUsIGlkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaWQ7XG59XG5cbiIsIi8qIGVzbGludCBwcmVmZXItZGVzdHJ1Y3R1cmluZzogMCAqL1xuLyogZXNsaW50IG5vLXVuZGVyc2NvcmUtZGFuZ2xlOiAwICovXG4vKiBlc2xpbnQgbm8tYml0d2lzZTogMCAqL1xuLyogZXNsaW50IGZ1bmMtbmFtZXM6IDAgKi9cblxuLypcbiAgTUlESUlucHV0IGlzIGEgd3JhcHBlciBhcm91bmQgYW4gaW5wdXQgb2YgYSBKYXp6IGluc3RhbmNlXG4qL1xuXG5pbXBvcnQgTUlESU1lc3NhZ2VFdmVudCBmcm9tICcuL21pZGltZXNzYWdlX2V2ZW50JztcbmltcG9ydCBNSURJQ29ubmVjdGlvbkV2ZW50IGZyb20gJy4vbWlkaWNvbm5lY3Rpb25fZXZlbnQnO1xuaW1wb3J0IHsgZGlzcGF0Y2hFdmVudCwgZ2V0TUlESURldmljZUlkIH0gZnJvbSAnLi9taWRpX2FjY2Vzcyc7XG5pbXBvcnQgeyBnZXREZXZpY2UgfSBmcm9tICcuLi91dGlsL3V0aWwnO1xuaW1wb3J0IFN0b3JlIGZyb20gJy4uL3V0aWwvc3RvcmUnO1xuXG5sZXQgbWlkaVByb2M7XG5jb25zdCBub2RlanMgPSBnZXREZXZpY2UoKS5ub2RlanM7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1JRElJbnB1dCB7XG4gICAgY29uc3RydWN0b3IoaW5mbywgaW5zdGFuY2UpIHtcbiAgICAgICAgdGhpcy5pZCA9IGdldE1JRElEZXZpY2VJZChpbmZvWzBdLCAnaW5wdXQnKTtcbiAgICAgICAgdGhpcy5uYW1lID0gaW5mb1swXTtcbiAgICAgICAgdGhpcy5tYW51ZmFjdHVyZXIgPSBpbmZvWzFdO1xuICAgICAgICB0aGlzLnZlcnNpb24gPSBpbmZvWzJdO1xuICAgICAgICB0aGlzLnR5cGUgPSAnaW5wdXQnO1xuICAgICAgICB0aGlzLnN0YXRlID0gJ2Nvbm5lY3RlZCc7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbiA9ICdwZW5kaW5nJztcblxuICAgICAgICB0aGlzLm9uc3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICB0aGlzLl9vbm1pZGltZXNzYWdlID0gbnVsbDtcbiAgICAgICAgLy8gYmVjYXVzZSB3ZSBuZWVkIHRvIGltcGxpY2l0bHkgb3BlbiB0aGUgZGV2aWNlIHdoZW4gYW4gb25taWRpbWVzc2FnZSBoYW5kbGVyIGdldHMgYWRkZWRcbiAgICAgICAgLy8gd2UgZGVmaW5lIGEgc2V0dGVyIHRoYXQgb3BlbnMgdGhlIGRldmljZSBpZiB0aGUgc2V0IHZhbHVlIGlzIGEgZnVuY3Rpb25cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdvbm1pZGltZXNzYWdlJywge1xuICAgICAgICAgICAgc2V0KHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fb25taWRpbWVzc2FnZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5fbGlzdGVuZXJzID0gbmV3IFN0b3JlKCkuc2V0KCdtaWRpbWVzc2FnZScsIG5ldyBTdG9yZSgpKS5zZXQoJ3N0YXRlY2hhbmdlJywgbmV3IFN0b3JlKCkpO1xuICAgICAgICB0aGlzLl9pbkxvbmdTeXNleE1lc3NhZ2UgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fc3lzZXhCdWZmZXIgPSBuZXcgVWludDhBcnJheSgpO1xuXG4gICAgICAgIHRoaXMuX2phenpJbnN0YW5jZSA9IGluc3RhbmNlO1xuICAgICAgICB0aGlzLl9qYXp6SW5zdGFuY2UuaW5wdXRJblVzZSA9IHRydWU7XG5cbiAgICAgICAgLy8gb24gTGludXggb3BlbmluZyBhbmQgY2xvc2luZyBKYXp6IGluc3RhbmNlcyBjYXVzZXMgdGhlIHBsdWdpbiB0byBjcmFzaCBhIGxvdCBzbyB3ZSBvcGVuXG4gICAgICAgIC8vIHRoZSBkZXZpY2UgaGVyZSBhbmQgZG9uJ3QgY2xvc2UgaXQgd2hlbiBjbG9zZSgpIGlzIGNhbGxlZCwgc2VlIGJlbG93XG4gICAgICAgIGlmIChnZXREZXZpY2UoKS5wbGF0Zm9ybSA9PT0gJ2xpbnV4Jykge1xuICAgICAgICAgICAgdGhpcy5famF6ekluc3RhbmNlLk1pZGlJbk9wZW4odGhpcy5uYW1lLCBtaWRpUHJvYy5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIsIHVzZUNhcHR1cmUpIHtcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzLmdldCh0eXBlKTtcbiAgICAgICAgaWYgKGxpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGlzdGVuZXJzLmhhcyhsaXN0ZW5lcikgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIsIHVzZUNhcHR1cmUpIHtcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzLmdldCh0eXBlKTtcbiAgICAgICAgaWYgKGxpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGlzdGVuZXJzLmhhcyhsaXN0ZW5lcikgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcnMuZGVsZXRlKGxpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGRpc3BhdGNoRXZlbnQoZXZ0KSB7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycy5nZXQoZXZ0LnR5cGUpO1xuICAgICAgICBsaXN0ZW5lcnMuZm9yRWFjaCgobGlzdGVuZXIpID0+IHtcbiAgICAgICAgICAgIGxpc3RlbmVyKGV2dCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChldnQudHlwZSA9PT0gJ21pZGltZXNzYWdlJykge1xuICAgICAgICAgICAgaWYgKHRoaXMuX29ubWlkaW1lc3NhZ2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9vbm1pZGltZXNzYWdlKGV2dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZXZ0LnR5cGUgPT09ICdzdGF0ZWNoYW5nZScpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9uc3RhdGVjaGFuZ2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uc3RhdGVjaGFuZ2UoZXZ0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9wZW4oKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb24gPT09ICdvcGVuJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChnZXREZXZpY2UoKS5wbGF0Zm9ybSAhPT0gJ2xpbnV4Jykge1xuICAgICAgICAgICAgdGhpcy5famF6ekluc3RhbmNlLk1pZGlJbk9wZW4odGhpcy5uYW1lLCBtaWRpUHJvYy5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSAnb3Blbic7XG4gICAgICAgIGRpc3BhdGNoRXZlbnQodGhpcyk7IC8vIGRpc3BhdGNoIE1JRElDb25uZWN0aW9uRXZlbnQgdmlhIE1JRElBY2Nlc3NcbiAgICB9XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdGlvbiA9PT0gJ2Nsb3NlZCcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2V0RGV2aWNlKCkucGxhdGZvcm0gIT09ICdsaW51eCcpIHtcbiAgICAgICAgICAgIHRoaXMuX2phenpJbnN0YW5jZS5NaWRpSW5DbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbiA9ICdjbG9zZWQnO1xuICAgICAgICBkaXNwYXRjaEV2ZW50KHRoaXMpOyAvLyBkaXNwYXRjaCBNSURJQ29ubmVjdGlvbkV2ZW50IHZpYSBNSURJQWNjZXNzXG4gICAgICAgIHRoaXMuX29ubWlkaW1lc3NhZ2UgPSBudWxsO1xuICAgICAgICB0aGlzLm9uc3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICB0aGlzLl9saXN0ZW5lcnMuZ2V0KCdtaWRpbWVzc2FnZScpLmNsZWFyKCk7XG4gICAgICAgIHRoaXMuX2xpc3RlbmVycy5nZXQoJ3N0YXRlY2hhbmdlJykuY2xlYXIoKTtcbiAgICB9XG5cbiAgICBfYXBwZW5kVG9TeXNleEJ1ZmZlcihkYXRhKSB7XG4gICAgICAgIGNvbnN0IG9sZExlbmd0aCA9IHRoaXMuX3N5c2V4QnVmZmVyLmxlbmd0aDtcbiAgICAgICAgY29uc3QgdG1wQnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkob2xkTGVuZ3RoICsgZGF0YS5sZW5ndGgpO1xuICAgICAgICB0bXBCdWZmZXIuc2V0KHRoaXMuX3N5c2V4QnVmZmVyKTtcbiAgICAgICAgdG1wQnVmZmVyLnNldChkYXRhLCBvbGRMZW5ndGgpO1xuICAgICAgICB0aGlzLl9zeXNleEJ1ZmZlciA9IHRtcEJ1ZmZlcjtcbiAgICB9XG5cbiAgICBfYnVmZmVyTG9uZ1N5c2V4KGRhdGEsIGluaXRpYWxPZmZzZXQpIHtcbiAgICAgICAgbGV0IGogPSBpbml0aWFsT2Zmc2V0O1xuICAgICAgICB3aGlsZSAoaiA8IGRhdGEubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoZGF0YVtqXSA9PSAweEY3KSB7XG4gICAgICAgICAgICAgICAgLy8gZW5kIG9mIHN5c2V4IVxuICAgICAgICAgICAgICAgIGogKz0gMTtcbiAgICAgICAgICAgICAgICB0aGlzLl9hcHBlbmRUb1N5c2V4QnVmZmVyKGRhdGEuc2xpY2UoaW5pdGlhbE9mZnNldCwgaikpO1xuICAgICAgICAgICAgICAgIHJldHVybiBqO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaiArPSAxO1xuICAgICAgICB9XG4gICAgICAgIC8vIGRpZG4ndCByZWFjaCB0aGUgZW5kOyBqdXN0IHRhY2sgaXQgb24uXG4gICAgICAgIHRoaXMuX2FwcGVuZFRvU3lzZXhCdWZmZXIoZGF0YS5zbGljZShpbml0aWFsT2Zmc2V0LCBqKSk7XG4gICAgICAgIHRoaXMuX2luTG9uZ1N5c2V4TWVzc2FnZSA9IHRydWU7XG4gICAgICAgIHJldHVybiBqO1xuICAgIH1cbn1cblxuXG5taWRpUHJvYyA9IGZ1bmN0aW9uICh0aW1lc3RhbXAsIGRhdGEpIHtcbiAgICBsZXQgbGVuZ3RoID0gMDtcbiAgICBsZXQgaTtcbiAgICBsZXQgaXNTeXNleE1lc3NhZ2UgPSBmYWxzZTtcblxuICAgIC8vIEphenogc29tZXRpbWVzIHBhc3NlcyB1cyBtdWx0aXBsZSBtZXNzYWdlcyBhdCBvbmNlLCBzbyB3ZSBuZWVkIHRvIHBhcnNlIHRoZW0gb3V0IGFuZCBwYXNzIHRoZW0gb25lIGF0IGEgdGltZS5cblxuICAgIGZvciAoaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSArPSBsZW5ndGgpIHtcbiAgICAgICAgbGV0IGlzVmFsaWRNZXNzYWdlID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuX2luTG9uZ1N5c2V4TWVzc2FnZSkge1xuICAgICAgICAgICAgaSA9IHRoaXMuX2J1ZmZlckxvbmdTeXNleChkYXRhLCBpKTtcbiAgICAgICAgICAgIGlmIChkYXRhW2kgLSAxXSAhPSAweGY3KSB7XG4gICAgICAgICAgICAgICAgLy8gcmFuIG9mZiB0aGUgZW5kIHdpdGhvdXQgaGl0dGluZyB0aGUgZW5kIG9mIHRoZSBzeXNleCBtZXNzYWdlXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXNTeXNleE1lc3NhZ2UgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaXNTeXNleE1lc3NhZ2UgPSBmYWxzZTtcbiAgICAgICAgICAgIHN3aXRjaCAoZGF0YVtpXSAmIDB4RjApIHtcbiAgICAgICAgICAgIGNhc2UgMHgwMDogLy8gQ2hldyB1cCBzcHVyaW91cyAweDAwIGJ5dGVzLiAgRml4ZXMgYSBXaW5kb3dzIHByb2JsZW0uXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gMTtcbiAgICAgICAgICAgICAgICBpc1ZhbGlkTWVzc2FnZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIDB4ODA6IC8vIG5vdGUgb2ZmXG4gICAgICAgICAgICBjYXNlIDB4OTA6IC8vIG5vdGUgb25cbiAgICAgICAgICAgIGNhc2UgMHhBMDogLy8gcG9seXBob25pYyBhZnRlcnRvdWNoXG4gICAgICAgICAgICBjYXNlIDB4QjA6IC8vIGNvbnRyb2wgY2hhbmdlXG4gICAgICAgICAgICBjYXNlIDB4RTA6IC8vIGNoYW5uZWwgbW9kZVxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IDM7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgMHhDMDogLy8gcHJvZ3JhbSBjaGFuZ2VcbiAgICAgICAgICAgIGNhc2UgMHhEMDogLy8gY2hhbm5lbCBhZnRlcnRvdWNoXG4gICAgICAgICAgICAgICAgbGVuZ3RoID0gMjtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAweEYwOlxuICAgICAgICAgICAgICAgIHN3aXRjaCAoZGF0YVtpXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMHhmMDogLy8gbGV0aWFibGUtbGVuZ3RoIHN5c2V4LlxuICAgICAgICAgICAgICAgICAgICBpID0gdGhpcy5fYnVmZmVyTG9uZ1N5c2V4KGRhdGEsIGkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVtpIC0gMV0gIT0gMHhmNykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmFuIG9mZiB0aGUgZW5kIHdpdGhvdXQgaGl0dGluZyB0aGUgZW5kIG9mIHRoZSBzeXNleCBtZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaXNTeXNleE1lc3NhZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgMHhGMTogLy8gTVRDIHF1YXJ0ZXIgZnJhbWVcbiAgICAgICAgICAgICAgICBjYXNlIDB4RjM6IC8vIHNvbmcgc2VsZWN0XG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aCA9IDI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAweEYyOiAvLyBzb25nIHBvc2l0aW9uIHBvaW50ZXJcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoID0gMztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBsZW5ndGggPSAxO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc1ZhbGlkTWVzc2FnZSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBldnQgPSB7fTtcbiAgICAgICAgZXZ0LnJlY2VpdmVkVGltZSA9IHBhcnNlRmxvYXQodGltZXN0YW1wLnRvU3RyaW5nKCkpICsgdGhpcy5famF6ekluc3RhbmNlLl9wZXJmVGltZVplcm87XG5cbiAgICAgICAgaWYgKGlzU3lzZXhNZXNzYWdlIHx8IHRoaXMuX2luTG9uZ1N5c2V4TWVzc2FnZSkge1xuICAgICAgICAgICAgZXZ0LmRhdGEgPSBuZXcgVWludDhBcnJheSh0aGlzLl9zeXNleEJ1ZmZlcik7XG4gICAgICAgICAgICB0aGlzLl9zeXNleEJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDApO1xuICAgICAgICAgICAgdGhpcy5faW5Mb25nU3lzZXhNZXNzYWdlID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBldnQuZGF0YSA9IG5ldyBVaW50OEFycmF5KGRhdGEuc2xpY2UoaSwgbGVuZ3RoICsgaSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5vZGVqcykge1xuICAgICAgICAgICAgaWYgKHRoaXMuX29ubWlkaW1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9vbm1pZGltZXNzYWdlKGV2dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IE1JRElNZXNzYWdlRXZlbnQodGhpcywgZXZ0LmRhdGEsIGV2dC5yZWNlaXZlZFRpbWUpO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGUpO1xuICAgICAgICB9XG4gICAgfVxufTtcbiIsIi8qIGVzbGludCBwcmVmZXItZGVzdHJ1Y3R1cmluZzogMCAqL1xuLyogZXNsaW50IG5vLXVuZGVyc2NvcmUtZGFuZ2xlOiAwICovXG5cbi8qXG4gIE1JRElPdXRwdXQgaXMgYSB3cmFwcGVyIGFyb3VuZCBhbiBvdXRwdXQgb2YgYSBKYXp6IGluc3RhbmNlXG4qL1xuaW1wb3J0IHsgZ2V0RGV2aWNlIH0gZnJvbSAnLi4vdXRpbC91dGlsJztcbmltcG9ydCBTdG9yZSBmcm9tICcuLi91dGlsL3N0b3JlJztcbmltcG9ydCB7IGRpc3BhdGNoRXZlbnQsIGdldE1JRElEZXZpY2VJZCB9IGZyb20gJy4vbWlkaV9hY2Nlc3MnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNSURJT3V0cHV0IHtcbiAgICBjb25zdHJ1Y3RvcihpbmZvLCBpbnN0YW5jZSkge1xuICAgICAgICB0aGlzLmlkID0gZ2V0TUlESURldmljZUlkKGluZm9bMF0sICdvdXRwdXQnKTtcbiAgICAgICAgdGhpcy5uYW1lID0gaW5mb1swXTtcbiAgICAgICAgdGhpcy5tYW51ZmFjdHVyZXIgPSBpbmZvWzFdO1xuICAgICAgICB0aGlzLnZlcnNpb24gPSBpbmZvWzJdO1xuICAgICAgICB0aGlzLnR5cGUgPSAnb3V0cHV0JztcbiAgICAgICAgdGhpcy5zdGF0ZSA9ICdjb25uZWN0ZWQnO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSAncGVuZGluZyc7XG4gICAgICAgIHRoaXMub25taWRpbWVzc2FnZSA9IG51bGw7XG4gICAgICAgIHRoaXMub25zdGF0ZWNoYW5nZSA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5fbGlzdGVuZXJzID0gbmV3IFN0b3JlKCk7XG4gICAgICAgIHRoaXMuX2luTG9uZ1N5c2V4TWVzc2FnZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9zeXNleEJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KCk7XG5cbiAgICAgICAgdGhpcy5famF6ekluc3RhbmNlID0gaW5zdGFuY2U7XG4gICAgICAgIHRoaXMuX2phenpJbnN0YW5jZS5vdXRwdXRJblVzZSA9IHRydWU7XG4gICAgICAgIGlmIChnZXREZXZpY2UoKS5wbGF0Zm9ybSA9PT0gJ2xpbnV4Jykge1xuICAgICAgICAgICAgdGhpcy5famF6ekluc3RhbmNlLk1pZGlPdXRPcGVuKHRoaXMubmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvcGVuKCkge1xuICAgICAgICBpZiAodGhpcy5jb25uZWN0aW9uID09PSAnb3BlbicpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2V0RGV2aWNlKCkucGxhdGZvcm0gIT09ICdsaW51eCcpIHtcbiAgICAgICAgICAgIHRoaXMuX2phenpJbnN0YW5jZS5NaWRpT3V0T3Blbih0aGlzLm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbiA9ICdvcGVuJztcbiAgICAgICAgZGlzcGF0Y2hFdmVudCh0aGlzKTsgLy8gZGlzcGF0Y2ggTUlESUNvbm5lY3Rpb25FdmVudCB2aWEgTUlESUFjY2Vzc1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICBpZiAodGhpcy5jb25uZWN0aW9uID09PSAnY2xvc2VkJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChnZXREZXZpY2UoKS5wbGF0Zm9ybSAhPT0gJ2xpbnV4Jykge1xuICAgICAgICAgICAgdGhpcy5famF6ekluc3RhbmNlLk1pZGlPdXRDbG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbiA9ICdjbG9zZWQnO1xuICAgICAgICBkaXNwYXRjaEV2ZW50KHRoaXMpOyAvLyBkaXNwYXRjaCBNSURJQ29ubmVjdGlvbkV2ZW50IHZpYSBNSURJQWNjZXNzXG4gICAgICAgIHRoaXMub25zdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgIHRoaXMuX2xpc3RlbmVycy5jbGVhcigpO1xuICAgIH1cblxuICAgIHNlbmQoZGF0YSwgdGltZXN0YW1wKSB7XG4gICAgICAgIGxldCBkZWxheUJlZm9yZVNlbmQgPSAwO1xuXG4gICAgICAgIGlmIChkYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRpbWVzdGFtcCkge1xuICAgICAgICAgICAgZGVsYXlCZWZvcmVTZW5kID0gTWF0aC5mbG9vcih0aW1lc3RhbXAgLSBwZXJmb3JtYW5jZS5ub3coKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGltZXN0YW1wICYmIChkZWxheUJlZm9yZVNlbmQgPiAxKSkge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5famF6ekluc3RhbmNlLk1pZGlPdXRMb25nKGRhdGEpO1xuICAgICAgICAgICAgfSwgZGVsYXlCZWZvcmVTZW5kKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2phenpJbnN0YW5jZS5NaWRpT3V0TG9uZyhkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBjbGVhcigpIHtcbiAgICAgICAgLy8gdG8gYmUgaW1wbGVtZW50ZWRcbiAgICB9XG5cbiAgICBhZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyLCB1c2VDYXB0dXJlKSB7XG4gICAgICAgIGlmICh0eXBlICE9PSAnc3RhdGVjaGFuZ2UnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5fbGlzdGVuZXJzLmhhcyhsaXN0ZW5lcikgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzLl9saXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIsIHVzZUNhcHR1cmUpIHtcbiAgICAgICAgaWYgKHR5cGUgIT09ICdzdGF0ZWNoYW5nZScpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9saXN0ZW5lcnMuaGFzKGxpc3RlbmVyKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRoaXMuX2xpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGlzcGF0Y2hFdmVudChldnQpIHtcbiAgICAgICAgdGhpcy5fbGlzdGVuZXJzLmZvckVhY2goKGxpc3RlbmVyKSA9PiB7XG4gICAgICAgICAgICBsaXN0ZW5lcihldnQpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodGhpcy5vbnN0YXRlY2hhbmdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLm9uc3RhdGVjaGFuZ2UoZXZ0KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsIlxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTUlESUNvbm5lY3Rpb25FdmVudCB7XG4gICAgY29uc3RydWN0b3IobWlkaUFjY2VzcywgcG9ydCkge1xuICAgICAgICB0aGlzLmJ1YmJsZXMgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jYW5jZWxCdWJibGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jYW5jZWxhYmxlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY3VycmVudFRhcmdldCA9IG1pZGlBY2Nlc3M7XG4gICAgICAgIHRoaXMuZGVmYXVsdFByZXZlbnRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmV2ZW50UGhhc2UgPSAwO1xuICAgICAgICB0aGlzLnBhdGggPSBbXTtcbiAgICAgICAgdGhpcy5wb3J0ID0gcG9ydDtcbiAgICAgICAgdGhpcy5yZXR1cm5WYWx1ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuc3JjRWxlbWVudCA9IG1pZGlBY2Nlc3M7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gbWlkaUFjY2VzcztcbiAgICAgICAgdGhpcy50aW1lU3RhbXAgPSBEYXRlLm5vdygpO1xuICAgICAgICB0aGlzLnR5cGUgPSAnc3RhdGVjaGFuZ2UnO1xuICAgIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE1JRElNZXNzYWdlRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKHBvcnQsIGRhdGEsIHJlY2VpdmVkVGltZSkge1xuICAgICAgICB0aGlzLmJ1YmJsZXMgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jYW5jZWxCdWJibGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jYW5jZWxhYmxlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY3VycmVudFRhcmdldCA9IHBvcnQ7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgIHRoaXMuZGVmYXVsdFByZXZlbnRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmV2ZW50UGhhc2UgPSAwO1xuICAgICAgICB0aGlzLnBhdGggPSBbXTtcbiAgICAgICAgdGhpcy5yZWNlaXZlZFRpbWUgPSByZWNlaXZlZFRpbWU7XG4gICAgICAgIHRoaXMucmV0dXJuVmFsdWUgPSB0cnVlO1xuICAgICAgICB0aGlzLnNyY0VsZW1lbnQgPSBwb3J0O1xuICAgICAgICB0aGlzLnRhcmdldCA9IHBvcnQ7XG4gICAgICAgIHRoaXMudGltZVN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdGhpcy50eXBlID0gJ21pZGltZXNzYWdlJztcbiAgICB9XG59XG4iLCIvKiBlc2xpbnQgbm8tdW5kZXJzY29yZS1kYW5nbGU6IDAgKi9cblxuLypcbiAgQ3JlYXRlcyBpbnN0YW5jZXMgb2YgdGhlIEphenogcGx1Z2luIGlmIG5lY2Vzc2FyeS4gSW5pdGlhbGx5IHRoZSBNSURJQWNjZXNzIGNyZWF0ZXMgb25lIG1haW4gSmF6eiBpbnN0YW5jZSB0aGF0IGlzIHVzZWRcbiAgdG8gcXVlcnkgYWxsIGluaXRpYWxseSBjb25uZWN0ZWQgZGV2aWNlcywgYW5kIHRvIHRyYWNrIHRoZSBkZXZpY2VzIHRoYXQgYXJlIGJlaW5nIGNvbm5lY3RlZCBvciBkaXNjb25uZWN0ZWQgYXQgcnVudGltZS5cblxuICBGb3IgZXZlcnkgTUlESUlucHV0IGFuZCBNSURJT3V0cHV0IHRoYXQgaXMgY3JlYXRlZCwgTUlESUFjY2VzcyBxdWVyaWVzIHRoZSBnZXRKYXp6SW5zdGFuY2UoKSBtZXRob2QgZm9yIGEgSmF6eiBpbnN0YW5jZVxuICB0aGF0IHN0aWxsIGhhdmUgYW4gYXZhaWxhYmxlIGlucHV0IG9yIG91dHB1dC4gQmVjYXVzZSBKYXp6IG9ubHkgYWxsb3dzIG9uZSBpbnB1dCBhbmQgb25lIG91dHB1dCBwZXIgaW5zdGFuY2UsIHdlXG4gIG5lZWQgdG8gY3JlYXRlIG5ldyBpbnN0YW5jZXMgaWYgbW9yZSB0aGFuIG9uZSBNSURJIGlucHV0IG9yIG91dHB1dCBkZXZpY2UgZ2V0cyBjb25uZWN0ZWQuXG5cbiAgTm90ZSB0aGF0IGFuIGV4aXN0aW5nIEphenogaW5zdGFuY2UgZG9lc24ndCBnZXQgZGVsZXRlZCB3aGVuIGJvdGggaXRzIGlucHV0IGFuZCBvdXRwdXQgZGV2aWNlIGFyZSBkaXNjb25uZWN0ZWQ7IGluc3RlYWQgaXRcbiAgd2lsbCBiZSByZXVzZWQgaWYgYSBuZXcgZGV2aWNlIGdldHMgY29ubmVjdGVkLlxuKi9cblxuaW1wb3J0IFN0b3JlIGZyb20gJy4vc3RvcmUnO1xuaW1wb3J0IHsgZ2V0RGV2aWNlIH0gZnJvbSAnLi91dGlsJztcblxuY29uc3QgamF6elBsdWdpbkluaXRUaW1lID0gMTAwOyAvLyBtaWxsaXNlY29uZHNcblxubGV0IGphenpJbnN0YW5jZU51bWJlciA9IDA7XG5jb25zdCBqYXp6SW5zdGFuY2VzID0gbmV3IFN0b3JlKCk7XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUphenpJbnN0YW5jZShjYWxsYmFjaykge1xuICAgIGNvbnN0IGlkID0gYGphenpfJHtqYXp6SW5zdGFuY2VOdW1iZXJ9XyR7RGF0ZS5ub3coKX1gO1xuICAgIGphenpJbnN0YW5jZU51bWJlciArPSAxO1xuICAgIGxldCBvYmpSZWY7XG4gICAgbGV0IGFjdGl2ZVg7XG5cbiAgICBpZiAoZ2V0RGV2aWNlKCkubm9kZWpzID09PSB0cnVlKSB7XG4gICAgICAgIC8vIGphenpNaWRpIGlzIGF2YWlsYWJsZSBnbG9iYWxseSBpbiB0aGUgbm9kZSBlbnZpcm9ubWVudFxuICAgICAgICBvYmpSZWYgPSBuZXcgamF6ek1pZGkuTUlESSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8qXG4gICAgICAgICAgICBnZW5lcmF0ZSB0aGlzIGh0bWw6XG5cbiAgICAgICAgICAgIDxvYmplY3QgaWQ9XCJKYXp6MVwiIGNsYXNzaWQ9XCJDTFNJRDoxQUNFMTYxOC0xQzdELTQ1NjEtQUVFMS0zNDg0MkFBODVFOTBcIiBjbGFzcz1cImhpZGRlblwiPlxuICAgICAgICAgICAgICAgIDxvYmplY3QgaWQ9XCJKYXp6MlwiIHR5cGU9XCJhdWRpby94LWphenpcIiBjbGFzcz1cImhpZGRlblwiPlxuICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT1cInZpc2liaWxpdHk6dmlzaWJsZTtcIj5UaGlzIHBhZ2UgcmVxdWlyZXMgPGEgaHJlZj1odHRwOi8vamF6ei1zb2Z0Lm5ldD5KYXp6LVBsdWdpbjwvYT4gLi4uPC9wPlxuICAgICAgICAgICAgICAgIDwvb2JqZWN0PlxuICAgICAgICAgICAgPC9vYmplY3Q+XG4gICAgICAgICovXG5cbiAgICAgICAgYWN0aXZlWCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29iamVjdCcpO1xuICAgICAgICBhY3RpdmVYLmlkID0gYCR7aWR9aWVgO1xuICAgICAgICBhY3RpdmVYLmNsYXNzaWQgPSAnQ0xTSUQ6MUFDRTE2MTgtMUM3RC00NTYxLUFFRTEtMzQ4NDJBQTg1RTkwJztcblxuICAgICAgICBvYmpSZWYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvYmplY3QnKTtcbiAgICAgICAgb2JqUmVmLmlkID0gaWQ7XG4gICAgICAgIG9ialJlZi50eXBlID0gJ2F1ZGlvL3gtamF6eic7XG5cbiAgICAgICAgYWN0aXZlWC5hcHBlbmRDaGlsZChvYmpSZWYpO1xuXG4gICAgICAgIGNvbnN0IHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgIHAuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ1RoaXMgcGFnZSByZXF1aXJlcyB0aGUgJykpO1xuXG4gICAgICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgIGEuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ0phenogcGx1Z2luJykpO1xuICAgICAgICBhLmhyZWYgPSAnaHR0cDovL2phenotc29mdC5uZXQvJztcblxuICAgICAgICBwLmFwcGVuZENoaWxkKGEpO1xuICAgICAgICBwLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcuJykpO1xuXG4gICAgICAgIG9ialJlZi5hcHBlbmRDaGlsZChwKTtcblxuICAgICAgICBsZXQgaW5zZXJ0aW9uUG9pbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnTUlESVBsdWdpbicpO1xuICAgICAgICBpZiAoIWluc2VydGlvblBvaW50KSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgaGlkZGVuIGVsZW1lbnRcbiAgICAgICAgICAgIGluc2VydGlvblBvaW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBpbnNlcnRpb25Qb2ludC5pZCA9ICdNSURJUGx1Z2luJztcbiAgICAgICAgICAgIGluc2VydGlvblBvaW50LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgIGluc2VydGlvblBvaW50LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICAgICAgICAgIGluc2VydGlvblBvaW50LnN0eWxlLmxlZnQgPSAnLTk5OTlweCc7XG4gICAgICAgICAgICBpbnNlcnRpb25Qb2ludC5zdHlsZS50b3AgPSAnLTk5OTlweCc7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGluc2VydGlvblBvaW50KTtcbiAgICAgICAgfVxuICAgICAgICBpbnNlcnRpb25Qb2ludC5hcHBlbmRDaGlsZChhY3RpdmVYKTtcbiAgICB9XG5cblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBsZXQgaW5zdGFuY2UgPSBudWxsO1xuICAgICAgICBpZiAob2JqUmVmLmlzSmF6eiA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgaW5zdGFuY2UgPSBvYmpSZWY7XG4gICAgICAgIH0gZWxzZSBpZiAoYWN0aXZlWC5pc0phenogPT09IHRydWUpIHtcbiAgICAgICAgICAgIGluc3RhbmNlID0gYWN0aXZlWDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5zdGFuY2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGluc3RhbmNlLl9wZXJmVGltZVplcm8gPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgICAgICAgIGphenpJbnN0YW5jZXMuc2V0KGphenpJbnN0YW5jZU51bWJlciwgaW5zdGFuY2UpO1xuICAgICAgICB9XG4gICAgICAgIGNhbGxiYWNrKGluc3RhbmNlKTtcbiAgICB9LCBqYXp6UGx1Z2luSW5pdFRpbWUpO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRKYXp6SW5zdGFuY2UodHlwZSwgY2FsbGJhY2spIHtcbiAgICBjb25zdCBrZXkgPSB0eXBlID09PSAnaW5wdXQnID8gJ2lucHV0SW5Vc2UnIDogJ291dHB1dEluVXNlJztcbiAgICBsZXQgaW5zdGFuY2UgPSBudWxsO1xuXG4gICAgY29uc3QgdmFsdWVzID0gamF6ekluc3RhbmNlcy52YWx1ZXMoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBjb25zdCBpbnN0ID0gdmFsdWVzW2ldO1xuICAgICAgICBpZiAoaW5zdFtrZXldICE9PSB0cnVlKSB7XG4gICAgICAgICAgICBpbnN0YW5jZSA9IGluc3Q7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpbnN0YW5jZSA9PT0gbnVsbCkge1xuICAgICAgICBjcmVhdGVKYXp6SW5zdGFuY2UoY2FsbGJhY2spO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNhbGxiYWNrKGluc3RhbmNlKTtcbiAgICB9XG59XG4iLCJsZXQgaWRJbmRleCA9IDA7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0b3JlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zdG9yZSA9IHt9O1xuICAgICAgICB0aGlzLmtleXMgPSBbXTtcbiAgICB9XG4gICAgYWRkKG9iaikge1xuICAgICAgICBjb25zdCBpZCA9IGAke25ldyBEYXRlKCkuZ2V0VGltZSgpfSR7aWRJbmRleH1gO1xuICAgICAgICBpZEluZGV4ICs9IDE7XG4gICAgICAgIHRoaXMua2V5cy5wdXNoKGlkKTtcbiAgICAgICAgdGhpcy5zdG9yZVtpZF0gPSBvYmo7XG4gICAgfVxuICAgIHNldChpZCwgb2JqKSB7XG4gICAgICAgIHRoaXMua2V5cy5wdXNoKGlkKTtcbiAgICAgICAgdGhpcy5zdG9yZVtpZF0gPSBvYmo7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBnZXQoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmVbaWRdO1xuICAgIH1cbiAgICBoYXMoaWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5cy5pbmRleE9mKGlkKSAhPT0gLTE7XG4gICAgfVxuICAgIGRlbGV0ZShpZCkge1xuICAgICAgICBkZWxldGUgdGhpcy5zdG9yZVtpZF07XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5rZXlzLmluZGV4T2YoaWQpO1xuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5rZXlzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHZhbHVlcygpIHtcbiAgICAgICAgY29uc3QgZWxlbWVudHMgPSBbXTtcbiAgICAgICAgY29uc3QgbCA9IHRoaXMua2V5cy5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5zdG9yZVt0aGlzLmtleXNbaV1dO1xuICAgICAgICAgICAgZWxlbWVudHMucHVzaChlbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWxlbWVudHM7XG4gICAgfVxuICAgIGZvckVhY2goY2IpIHtcbiAgICAgICAgY29uc3QgbCA9IHRoaXMua2V5cy5sZW5ndGg7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5zdG9yZVt0aGlzLmtleXNbaV1dO1xuICAgICAgICAgICAgY2IoZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHRoaXMua2V5cyA9IFtdO1xuICAgICAgICB0aGlzLnN0b3JlID0ge307XG4gICAgfVxufVxuIiwiLyogZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOiAwICovXG4vKiBlc2xpbnQgbm8tYml0d2lzZTogMCAqL1xuLyogZXNsaW50IG5vLW1peGVkLW9wZXJhdG9yczogMCAqL1xuXG4vKlxuICBBIGNvbGxlY3Rpb24gb2YgaGFuZHkgdXRpbCBtZXRob2RzXG4qL1xuXG5sZXQgZGV2aWNlID0gbnVsbDtcblxuLy8gY2hlY2sgb24gd2hhdCB0eXBlIG9mIGRldmljZSB3ZSBhcmUgcnVubmluZywgbm90ZSB0aGF0IGluIHRoaXMgY29udGV4dFxuLy8gYSBkZXZpY2UgaXMgYSBjb21wdXRlciBub3QgYSBNSURJIGRldmljZVxuZXhwb3J0IGZ1bmN0aW9uIGdldERldmljZSgpIHtcbiAgICBpZiAoZGV2aWNlICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBkZXZpY2U7XG4gICAgfVxuXG4gICAgbGV0IHBsYXRmb3JtID0gJ3VuZGV0ZWN0ZWQnO1xuICAgIGxldCBicm93c2VyID0gJ3VuZGV0ZWN0ZWQnO1xuXG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3Iubm9kZWpzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBkZXZpY2UgPSB7XG4gICAgICAgICAgICBwbGF0Zm9ybTogcHJvY2Vzcy5wbGF0Zm9ybSxcbiAgICAgICAgICAgIG5vZGVqczogdHJ1ZSxcbiAgICAgICAgICAgIG1vYmlsZTogcGxhdGZvcm0gPT09ICdpb3MnIHx8IHBsYXRmb3JtID09PSAnYW5kcm9pZCcsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBkZXZpY2U7XG4gICAgfVxuXG4gICAgY29uc3QgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuXG4gICAgaWYgKHVhLm1hdGNoKC8oaVBhZHxpUGhvbmV8aVBvZCkvZykpIHtcbiAgICAgICAgcGxhdGZvcm0gPSAnaW9zJztcbiAgICB9IGVsc2UgaWYgKHVhLmluZGV4T2YoJ0FuZHJvaWQnKSAhPT0gLTEpIHtcbiAgICAgICAgcGxhdGZvcm0gPSAnYW5kcm9pZCc7XG4gICAgfSBlbHNlIGlmICh1YS5pbmRleE9mKCdMaW51eCcpICE9PSAtMSkge1xuICAgICAgICBwbGF0Zm9ybSA9ICdsaW51eCc7XG4gICAgfSBlbHNlIGlmICh1YS5pbmRleE9mKCdNYWNpbnRvc2gnKSAhPT0gLTEpIHtcbiAgICAgICAgcGxhdGZvcm0gPSAnb3N4JztcbiAgICB9IGVsc2UgaWYgKHVhLmluZGV4T2YoJ1dpbmRvd3MnKSAhPT0gLTEpIHtcbiAgICAgICAgcGxhdGZvcm0gPSAnd2luZG93cyc7XG4gICAgfVxuXG4gICAgaWYgKHVhLmluZGV4T2YoJ0Nocm9tZScpICE9PSAtMSkge1xuICAgICAgICAvLyBjaHJvbWUsIGNocm9taXVtIGFuZCBjYW5hcnlcbiAgICAgICAgYnJvd3NlciA9ICdjaHJvbWUnO1xuXG4gICAgICAgIGlmICh1YS5pbmRleE9mKCdPUFInKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIGJyb3dzZXIgPSAnb3BlcmEnO1xuICAgICAgICB9IGVsc2UgaWYgKHVhLmluZGV4T2YoJ0Nocm9taXVtJykgIT09IC0xKSB7XG4gICAgICAgICAgICBicm93c2VyID0gJ2Nocm9taXVtJztcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAodWEuaW5kZXhPZignU2FmYXJpJykgIT09IC0xKSB7XG4gICAgICAgIGJyb3dzZXIgPSAnc2FmYXJpJztcbiAgICB9IGVsc2UgaWYgKHVhLmluZGV4T2YoJ0ZpcmVmb3gnKSAhPT0gLTEpIHtcbiAgICAgICAgYnJvd3NlciA9ICdmaXJlZm94JztcbiAgICB9IGVsc2UgaWYgKHVhLmluZGV4T2YoJ1RyaWRlbnQnKSAhPT0gLTEpIHtcbiAgICAgICAgYnJvd3NlciA9ICdpZSc7XG4gICAgICAgIGlmICh1YS5pbmRleE9mKCdNU0lFIDknKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIGJyb3dzZXIgPSAnaWU5JztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwbGF0Zm9ybSA9PT0gJ2lvcycpIHtcbiAgICAgICAgaWYgKHVhLmluZGV4T2YoJ0NyaU9TJykgIT09IC0xKSB7XG4gICAgICAgICAgICBicm93c2VyID0gJ2Nocm9tZSc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkZXZpY2UgPSB7XG4gICAgICAgIHBsYXRmb3JtLFxuICAgICAgICBicm93c2VyLFxuICAgICAgICBtb2JpbGU6IHBsYXRmb3JtID09PSAnaW9zJyB8fCBwbGF0Zm9ybSA9PT0gJ2FuZHJvaWQnLFxuICAgICAgICBub2RlanM6IGZhbHNlLFxuICAgIH07XG4gICAgcmV0dXJuIGRldmljZTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gcG9seWZpbGxQZXJmb3JtYW5jZSgpIHtcbiAgICAvLyBwZXJmb3JtYW5jZSBpcyBhIGdsb2JhbCB2YXJpYWJsZVxuICAgIGlmICh0eXBlb2YgcGVyZm9ybWFuY2UgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHBlcmZvcm1hbmNlID0ge307XG4gICAgfVxuICAgIERhdGUubm93ID0gRGF0ZS5ub3cgfHwgKCgpID0+IG5ldyBEYXRlKCkuZ2V0VGltZSgpKTtcblxuICAgIGlmICh0eXBlb2YgcGVyZm9ybWFuY2Uubm93ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBsZXQgbm93T2Zmc2V0ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdHlwZW9mIHBlcmZvcm1hbmNlLnRpbWluZyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAgIHR5cGVvZiBwZXJmb3JtYW5jZS50aW1pbmcubmF2aWdhdGlvblN0YXJ0ICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICApIHtcbiAgICAgICAgICAgIG5vd09mZnNldCA9IHBlcmZvcm1hbmNlLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQ7XG4gICAgICAgIH1cbiAgICAgICAgcGVyZm9ybWFuY2Uubm93ID0gZnVuY3Rpb24gbm93KCkge1xuICAgICAgICAgICAgcmV0dXJuIERhdGUubm93KCkgLSBub3dPZmZzZXQ7XG4gICAgICAgIH07XG4gICAgfVxufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVVVSUQoKSB7XG4gICAgbGV0IGQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICBsZXQgdXVpZCA9IG5ldyBBcnJheSg2NCkuam9pbigneCcpOy8vICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnO1xuICAgIHV1aWQgPSB1dWlkLnJlcGxhY2UoL1t4eV0vZywgKGMpID0+IHtcbiAgICAgICAgY29uc3QgciA9IChkICsgTWF0aC5yYW5kb20oKSAqIDE2KSAlIDE2IHwgMDtcbiAgICAgICAgZCA9IE1hdGguZmxvb3IoZCAvIDE2KTtcbiAgICAgICAgcmV0dXJuIChjID09PSAneCcgPyByIDogKHIgJiAweDMgfCAweDgpKS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdXVpZDtcbn1cblxuXG4vLyBhIHZlcnkgc2ltcGxlIGltcGxlbWVudGF0aW9uIG9mIGEgUHJvbWlzZSBmb3IgSW50ZXJuZXQgRXhwbG9yZXIgYW5kIE5vZGVqc1xuZXhwb3J0IGZ1bmN0aW9uIHBvbHlmaWxsUHJvbWlzZShzY29wZSkge1xuICAgIGlmICh0eXBlb2Ygc2NvcGUuUHJvbWlzZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBzY29wZS5Qcm9taXNlID0gZnVuY3Rpb24gcHJvbWlzZShleGVjdXRvcikge1xuICAgICAgICAgICAgdGhpcy5leGVjdXRvciA9IGV4ZWN1dG9yO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNjb3BlLlByb21pc2UucHJvdG90eXBlLnRoZW4gPSBmdW5jdGlvbiB0aGVuKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiByZXNvbHZlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSA9ICgpID0+IHsgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVqZWN0ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0ID0gKCkgPT4geyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5leGVjdXRvcihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9O1xuICAgIH1cbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gcG9seWZpbGwoKSB7XG4gICAgY29uc3QgZCA9IGdldERldmljZSgpO1xuICAgIC8vIGNvbnNvbGUubG9nKGRldmljZSk7XG4gICAgaWYgKGQuYnJvd3NlciA9PT0gJ2llJykge1xuICAgICAgICBwb2x5ZmlsbFByb21pc2Uod2luZG93KTtcbiAgICB9IGVsc2UgaWYgKGQubm9kZWpzID09PSB0cnVlKSB7XG4gICAgICAgIHBvbHlmaWxsUHJvbWlzZShnbG9iYWwpO1xuICAgIH1cbiAgICBwb2x5ZmlsbFBlcmZvcm1hbmNlKCk7XG59XG4iXX0=

//# sourceMappingURL=WebMIDIAPI.js.map
